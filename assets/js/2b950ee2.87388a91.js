"use strict";(self.webpackChunkalova_website=self.webpackChunkalova_website||[]).push([[9154],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=p(a),h=r,m=u["".concat(l,".").concat(h)]||u[h]||c[h]||o;return a?n.createElement(m,s(s({ref:t},d),{},{components:a})):n.createElement(m,s({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1331:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={title:"Request method instance",sidebar_position:20},s=void 0,i={unversionedId:"tutorial/learning/method-instance",id:"tutorial/learning/method-instance",title:"Request method instance",description:"In alova, each request corresponds to a method instance, which describes the url, request header, request parameters, and request behavior parameters such as response data processing and cache data processing. Through the method instance, you can experience a unified user experience in any js environment, and it can run normally with very few changes. At the same time, the method instance puts the request parameters and request behavior parameters together, which is more convenient for api managed, rather than scattered across multiple code files.",source:"@site/docs/tutorial/03-learning/02-method-instance.md",sourceDirName:"tutorial/03-learning",slug:"/tutorial/learning/method-instance",permalink:"/tutorial/learning/method-instance",draft:!1,editUrl:"https://github.com/alovajs/alovajs.github.io/blob/main/docs/tutorial/03-learning/02-method-instance.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{title:"Request method instance",sidebar_position:20},sidebar:"tutorialSidebar",previous:{title:"About alova instance",permalink:"/tutorial/learning/alova-instance"},next:{title:"Send request",permalink:"/tutorial/learning/use-request"}},l={},p=[{value:"create instance",id:"create-instance",level:2},{value:"Set request-level timeout",id:"set-request-level-timeout",level:2},{value:"Request behavior parameters",id:"request-behavior-parameters",level:2},{value:"Set the parameters supported by the request adapter",id:"set-the-parameters-supported-by-the-request-adapter",level:2},{value:"Request method type",id:"request-method-type",level:2}],d={toc:p},u="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In alova, each request corresponds to a method instance, which describes the url, request header, request parameters, and request behavior parameters such as response data processing and cache data processing. Through the method instance, you can experience a unified user experience in any js environment, and it can run normally with very few changes. At the same time, the method instance puts the request parameters and request behavior parameters together, which is more convenient for api managed, rather than scattered across multiple code files."),(0,r.kt)("h2",{id:"create-instance"},"create instance"),(0,r.kt)("p",null,"The creation of a method instance is also very similar to the request sending function of axios. You need to create method instance by alova instance created in last term. Let's first create a Method instance to get the todo list."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// Create a Get instance to describe the information of a Get request\nconst todoListGetter = alovaInstance.Get('/todo/list', {\n  // request header\n  headers: {\n    'Content-Type': 'application/json;charset=UTF-8'\n  },\n  // The params parameter will be spliced after the url in the form of?\n  params: {\n    userId: 1\n  }\n});\n")),(0,r.kt)("p",null,"Then create a POST request Method instance to submit the todo item, but now the second param is the request body."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// Create a Post instance\nconst createTodoPoster = alovaInstance.Post(\n  '/todo/create',\n  // The second parameter is the http body data\n  {\n    title: 'test todo',\n    time: '12:00'\n  },\n  // The third parameter is request configuration related information\n  {\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8'\n    },\n    params: {\n      //...\n    }\n  }\n);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Note: The ",(0,r.kt)("inlineCode",{parentName:"p"},"Method")," instance only saves the information needed for the request, it does not send the request, but needs to send the request through the ",(0,r.kt)("inlineCode",{parentName:"p"},"use hook")," (will be explained in detail later), or call ",(0,r.kt)("inlineCode",{parentName:"p"},"methodInstance.send")," to send request, which is different from ",(0,r.kt)("inlineCode",{parentName:"p"},"axios"),".")),(0,r.kt)("h2",{id:"set-request-level-timeout"},"Set request-level timeout"),(0,r.kt)("p",null,"The global request timeout applies to all ",(0,r.kt)("inlineCode",{parentName:"p"},"Method")," instances, but many times we need to set different timeouts according to special requests. At this time, we can set the request-level timeout, which will override the global ",(0,r.kt)("inlineCode",{parentName:"p"},"timeout")," parameter"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// Request timeout at the request level\nconst todoListGetter = alovaInstance.Get('/todo/list', {\n  //...\n  // highlight-start\n  timeout: 10000\n  // highlight-end\n});\n")),(0,r.kt)("h2",{id:"request-behavior-parameters"},"Request behavior parameters"),(0,r.kt)("p",null,"In addition to setting request parameters, ",(0,r.kt)("inlineCode",{parentName:"p"},"method")," instances can also set request behavior parameters. The following are the supported request behavior parameters, which will also be explained in detail in subsequent chapters."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"method instance name, which is generally used to ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/next-step/method-instance-matcher"},"match method instances"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"transformData"),(0,r.kt)("td",{parentName:"tr",align:null},"Set the response data conversion function, see ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/learning/transform-response-data"},"Convert Response Data"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"localCache"),(0,r.kt)("td",{parentName:"tr",align:null},"Set the request-level cache mode, see ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/learning/response-cache"},"cache mode"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"enableDownload"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable download progress information, see ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/next-step/download-upload-progress"},"Download/Upload Progress"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"enableUpload"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable upload progress information, see ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/next-step/download-upload-progress"},"Download/Upload Progress"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"hitSource"),(0,r.kt)("td",{parentName:"tr",align:null},"Cache auto-invalidation settings, see ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/next-step/auto-invalidate-cache"},"Auto-invalidate cache")," for details")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shareRequest"),(0,r.kt)("td",{parentName:"tr",align:null},"Sharing request, see ",(0,r.kt)("a",{parentName:"td",href:"/tutorial/next-step/share-request"},"Share Request"))))),(0,r.kt)("h2",{id:"set-the-parameters-supported-by-the-request-adapter"},"Set the parameters supported by the request adapter"),(0,r.kt)("p",null,"In the ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/learning/alova-instance"},"Chapter about understanding alova instances"),", we have built-in and recommended ",(0,r.kt)("inlineCode",{parentName:"p"},"GlobalFetch")," as alova's request adapter. It will internally send requests through the ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch")," function. At this time, you can also Any parameter supported by ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch")," can be configured on the ",(0,r.kt)("inlineCode",{parentName:"p"},"method")," instance, but we recommend setting request parameters using the fields mentioned above."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const todoListGetter = alovaInstance.Get('/todo/list', {\n  // ...\n  // highlight-start\n  credentials: 'same-origin',\n  referrerPolicy: 'no-referrer',\n  mode: 'cors'\n  // highlight-end\n});\n")),(0,r.kt)("p",null,"This is easy to understand, that is, in addition to unified parameters such as request parameters and request behavior parameters, you can also set any parameters supported by the request adapter. In the extension, we also provide ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/extension/alova-adapter-xhr"},"XMLHttpRequest Adapter"),", ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/extension/alova-adapter-axios"},"axios Adapter"),", ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/extension/alova-adapter-uniapp"},"Uniapp Adapter"),", ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/extension/alova-adapter-taro"},"Taro adapter")," etc. Each adapter also has the parameters they support."),(0,r.kt)("h2",{id:"request-method-type"},"Request method type"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Alova")," provides abstract instances of seven request methods including GET, POST, PUT, DELETE, HEAD, OPTIONS, and PATCH. For specific usage methods, please read ",(0,r.kt)("a",{parentName:"p",href:"../next-step/method-details"},"Request Method Details"),"."))}c.isMDXComponent=!0}}]);