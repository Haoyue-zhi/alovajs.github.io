"use strict";(self.webpackChunkalova_website=self.webpackChunkalova_website||[]).push([[1951],{97e3:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var s=n(85893),i=n(11151);const o={title:"Development Guidelines"},l=void 0,c={id:"contributing/developing-guidelines",title:"Development Guidelines",description:"Node.js 18+, pnpm 9+",source:"@site/docs/contributing/03-developing-guidelines.md",sourceDirName:"contributing",slug:"/contributing/developing-guidelines",permalink:"/contributing/developing-guidelines",draft:!1,unlisted:!1,editUrl:"https://github.com/alovajs/alovajs.github.io/blob/main/docs/contributing/03-developing-guidelines.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Development Guidelines"},sidebar:"contributing",previous:{title:"Become a core team member",permalink:"/contributing/become-core-member"},next:{title:"Code of Conduct",permalink:"/contributing/code-of-conduct"}},r={},a=[{value:"1. Fork repository",id:"1-fork-repository",level:2},{value:"2. Clone the project to your local machine",id:"2-clone-the-project-to-your-local-machine",level:2},{value:"3. Create a pull request",id:"3-create-a-pull-request",level:2},{value:"4. Code locally",id:"4-code-locally",level:2},{value:"Install dependencies",id:"install-dependencies",level:3},{value:"Install recommended plugins (vscode)",id:"install-recommended-plugins-vscode",level:3},{value:"Project structure",id:"project-structure",level:3},{value:"Coding standards",id:"coding-standards",level:3},{value:"Code format",id:"code-format",level:4},{value:"Reuse code as much as possible",id:"reuse-code-as-much-as-possible",level:4},{value:"Typescript",id:"typescript",level:4},{value:"5. Unit test guide",id:"5-unit-test-guide",level:2},{value:"Add test cases",id:"add-test-cases",level:3},{value:"Run and debug a single test case or collection",id:"run-and-debug-a-single-test-case-or-collection",level:3},{value:"Run all test cases",id:"run-all-test-cases",level:3},{value:"6. Submit code",id:"6-submit-code",level:2},{value:"7. Add documents",id:"7-add-documents",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.admonition,{title:"Version requirements",type:"info",children:(0,s.jsx)(t.p,{children:"Node.js 18+, pnpm 9+"})}),"\n",(0,s.jsx)(t.h2,{id:"1-fork-repository",children:"1. Fork repository"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://github.com/alovajs/alova/fork",children:"Open the alova repository fork page"}),', click "Create fork" to fork the repository, and clone the forked repository to your local machine.']}),"\n",(0,s.jsx)(t.h2,{id:"2-clone-the-project-to-your-local-machine",children:"2. Clone the project to your local machine"}),"\n",(0,s.jsxs)(t.p,{children:["Use the ",(0,s.jsx)(t.code,{children:"git clone"})," command, or the ",(0,s.jsx)(t.code,{children:"Github Desktop"})," application to clone the project."]}),"\n",(0,s.jsx)(t.h2,{id:"3-create-a-pull-request",children:"3. Create a pull request"}),"\n",(0,s.jsx)(t.p,{children:"You can create a pull request by forking the repository after writing the code, or you can submit the code in any number of commits instead of submitting the entire code at once."}),"\n",(0,s.jsx)(t.h2,{id:"4-code-locally",children:"4. Code locally"}),"\n",(0,s.jsx)(t.h3,{id:"install-dependencies",children:"Install dependencies"}),"\n",(0,s.jsxs)(t.p,{children:["Use ",(0,s.jsx)(t.code,{children:"pnpm install"})," to install dependencies."]}),"\n",(0,s.jsx)(t.h3,{id:"install-recommended-plugins-vscode",children:"Install recommended plugins (vscode)"}),"\n",(0,s.jsx)(t.p,{children:"If you use vscode, you will be recommended to install the following plugins:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"eslint: Check code quality"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"prettier: Format code"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"jest: Automatically execute unit test cases, and execute a single collection or unit test case"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"EditorConfig: Ensure consistent file format"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"project-structure",children:"Project structure"}),"\n",(0,s.jsx)(t.p,{children:"alova is a monorepo project with the following structure:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"|-.github\n| |-ISSUE_TEMPLATE -> github issues template\n| |-workflows -> github action\n| |-DISCUSSION_TEMPLATE -> github discussion template\n| |-pull_request_template -> github pull request template\n|-.changeset -> changeset configuration\n|-.husky -> husky configuration\n|-.vscode -> vscode configuration\n|-examples -> alova example project\n|-internal -> Public module for test cases\n|-packages -> Project source code\n|-scripts -> alova-scripts scripts\n|-Other configuration files\n\n"})}),"\n",(0,s.jsx)(t.h3,{id:"coding-standards",children:"Coding standards"}),"\n",(0,s.jsx)(t.h4,{id:"code-format",children:"Code format"}),"\n",(0,s.jsxs)(t.p,{children:["Please install the recommended plugins. ",(0,s.jsx)(t.code,{children:"prettier"})," and ",(0,s.jsx)(t.code,{children:"eslint"})," will automatically format the code every time you save the file, so you don't have to worry about the format."]}),"\n",(0,s.jsx)(t.h4,{id:"reuse-code-as-much-as-possible",children:"Reuse code as much as possible"}),"\n",(0,s.jsxs)(t.p,{children:["Public variables and methods are defined in ",(0,s.jsx)(t.code,{children:"packages/shared"}),". Please browse them first and reuse them as much as possible."]}),"\n",(0,s.jsx)(t.h4,{id:"typescript",children:"Typescript"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"When writing typescript types, please try to write appropriate types and narrow the type range."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["The types of ",(0,s.jsx)(t.code,{children:"packages/alova"})," and ",(0,s.jsx)(t.code,{children:"packages/client"})," packages are manually written. When modifying them, please make sure that ",(0,s.jsx)(t.code,{children:"typings"})," of ",(0,s.jsx)(t.code,{children:"packages/alova"})," and ",(0,s.jsx)(t.code,{children:"packages/client"})," are also updated synchronously."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"5-unit-test-guide",children:"5. Unit test guide"}),"\n",(0,s.jsx)(t.p,{children:"After writing the code, add the corresponding unit test cases and try to include tests for edge cases."}),"\n",(0,s.jsx)(t.p,{children:"The alova project uses jest as the unit testing framework and msw as the mock server. It is recommended to use the TDD mode. After each code modification, run the corresponding unit test and pass it."}),"\n",(0,s.jsx)(t.admonition,{title:"Important",type:"warning",children:(0,s.jsx)(t.p,{children:"When you create a pull request to submit code, please make sure that all unit tests pass. If you find any problems, you can submit it again, and the GitHub action will automatically run again."})}),"\n",(0,s.jsx)(t.h3,{id:"add-test-cases",children:"Add test cases"}),"\n",(0,s.jsxs)(t.p,{children:["Unit test cases for each package are stored in the ",(0,s.jsx)(t.code,{children:"packages/[packageName]/test"})," folder. Please find the corresponding test case file and add your test case. If there is no suitable test collection, you can create it yourself;"]}),"\n",(0,s.jsx)(t.h3,{id:"run-and-debug-a-single-test-case-or-collection",children:"Run and debug a single test case or collection"}),"\n",(0,s.jsxs)(t.p,{children:["It is recommended to use the ",(0,s.jsx)(t.strong,{children:"jest"})," plug-in (one of the plug-ins recommended above) to test a single test case or collection. You can right-click in the test case to run the specified test case, select ",(0,s.jsx)(t.code,{children:"Run Test"})," to run this test case, and select ",(0,s.jsx)(t.code,{children:"Debug Test"})," to debug this test case, as shown in the figure:"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"image",src:n(8175).Z+"",width:"923",height:"309"})}),"\n",(0,s.jsx)(t.h3,{id:"run-all-test-cases",children:"Run all test cases"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Use the ",(0,s.jsx)(t.strong,{children:"jest"})," plug-in to run, as shown below:"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"image",src:n(4196).Z+"",width:"415",height:"357"})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsxs)(t.li,{children:["You can also run unit tests through the command line ",(0,s.jsx)(t.code,{children:"pnpm run test"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"6-submit-code",children:"6. Submit code"}),"\n",(0,s.jsxs)(t.p,{children:["alova uses ",(0,s.jsx)(t.a,{href:"https://github.com/changesets/changesets",children:"changesets"})," as a release tool, which can help us automatically generate ",(0,s.jsx)(t.code,{children:"CHANGELOG"})," to increase the version number and release, but you need to submit the code according to the following process."]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Tell changeset which packages have been changed. Use the ",(0,s.jsx)(t.code,{children:"pnpm run changeset"})," command, which will guide you to fill it out in an interactive way."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Submit the code to the remote repository. You need to make sure that the message format of the submission follows the ",(0,s.jsx)(t.a,{href:"https://www.conventionalcommits.org/zh-hans/v1.0.0/",children:"Commit Information Convention"}),". It is recommended that you try to use ",(0,s.jsx)(t.code,{children:"pnpm run commit"})," to automatically generate a git message that meets the specification."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Create a pull request and wait for merging."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"7-add-documents",children:"7. Add documents"}),"\n",(0,s.jsxs)(t.p,{children:["If you are adding new features, try to add relevant documentation for the new features. Please read ",(0,s.jsx)(t.a,{href:"/contributing/overview#correct-or-add-docs",children:"Correct or add docs"})," for details. Otherwise, please explain it in the pull request."]})]})}function u(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4196:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/run-all-test-1347e5d9697ae0c6cc19004a96b7759d.png"},8175:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/run-single-test-314674c8662df7169e8ba952ea0f79a4.png"},11151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>l});var s=n(67294);const i={},o=s.createContext(i);function l(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);