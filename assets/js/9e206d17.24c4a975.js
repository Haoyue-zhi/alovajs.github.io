"use strict";(self.webpackChunkalova_website=self.webpackChunkalova_website||[]).push([[8602],{6634:(t,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>u});var o=r(5893),n=r(1151);const s={title:"Abort request",sidebar_position:150},a=void 0,i={id:"tutorial/getting-started/abort-request",title:"Abort request",description:"Abort the request through useHook function",source:"@site/docs/tutorial/02-getting-started/15-abort-request.md",sourceDirName:"tutorial/02-getting-started",slug:"/tutorial/getting-started/abort-request",permalink:"/tutorial/getting-started/abort-request",draft:!1,unlisted:!1,editUrl:"https://github.com/alovajs/alovajs.github.io/blob/main/docs/tutorial/02-getting-started/15-abort-request.md",tags:[],version:"current",sidebarPosition:150,frontMatter:{title:"Abort request",sidebar_position:150},sidebar:"tutorialSidebar",previous:{title:"Download/Upload progress",permalink:"/tutorial/getting-started/download-upload-progress"},next:{title:"method metadata",permalink:"/tutorial/getting-started/method-metadata"}},c={},u=[{value:"Abort the request through useHook function",id:"abort-the-request-through-usehook-function",level:2},{value:"Abort requests through method instances",id:"abort-requests-through-method-instances",level:2}];function d(t){const e={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,n.a)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{id:"abort-the-request-through-usehook-function",children:"Abort the request through useHook function"}),"\n",(0,o.jsxs)(e.p,{children:["When the ",(0,o.jsx)(e.code,{children:"timeout"})," parameter is not set, the request will never time out. If you need to manually abort the request, you can receive the ",(0,o.jsx)(e.code,{children:"abort"})," method when ",(0,o.jsx)(e.code,{children:"useRequest/useWatcher"})," or the function is called."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"// useRequest\r\nconst {\r\n  // ...\r\n  // highlight-start\r\n  // abort function is used to abort requests\r\n  abort\r\n  // highlight-end\r\n} = useRequest(todoListGetter);\r\n\r\n// useWatcher\r\nconst {\r\n  // ...\r\n  // highlight-start\r\n  // abort function is used to abort requests\r\n  abort\r\n  // highlight-end\r\n} = useWatcher(todoListGetter, [page]);\n"})}),"\n",(0,o.jsxs)(e.p,{children:["Then you can call ",(0,o.jsx)(e.code,{children:"abort"})," to cancel the request."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"const handleCancel = () => {\r\n  todoListGetter.abort();\r\n};\n"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.code,{children:"[2.9.0+]"})," In react, the abort function is wrapped with ",(0,o.jsx)(e.code,{children:"useCallback"}),", and it is not restricted by closure traps. You can use it directly in events without worrying about causing performance problems."]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"abort-requests-through-method-instances",children:"Abort requests through method instances"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.code,{children:"[2.6.2+]"})," In addition, this ",(0,o.jsx)(e.code,{children:"abort"})," function will also be bound to the current method instance, so whether it is a request sent through ",(0,o.jsx)(e.code,{children:"useRequest/useWatcher"})," or ",(0,o.jsx)(e.code,{children:"await alovaInstance.Get"}),", it can also be like this to abort the request."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"const todoListGetter = alovaInstance.Get('todo/list');\r\nuseRequest(todoListGetter);\r\nuseWatcher(() => todoListGetter);\r\nawait todoListGetter;\r\n\r\n// highlight-start\r\n// Calling abort on the method can also abort the request\r\nconst handleCancel = () => {\r\n  todoListGetter.abort();\r\n};\r\n// highlight-end\n"})}),"\n",(0,o.jsxs)(e.p,{children:["Therefore, if you need to abort requests in batches when certain conditions are met, you can also call ",(0,o.jsx)(e.code,{children:"abort"})," in ",(0,o.jsx)(e.code,{children:"beforeRequest"})," to abort requests."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"const alovaInst = createAlova({\r\n  // ...\r\n  beforeRequest(method) {\r\n    if (someCondition) {\r\n      method.abort();\r\n    }\r\n  }\r\n});\n"})})]})}function h(t={}){const{wrapper:e}={...(0,n.a)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(d,{...t})}):d(t)}},1151:(t,e,r)=>{r.d(e,{Z:()=>i,a:()=>a});var o=r(7294);const n={},s=o.createContext(n);function a(t){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function i(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:a(t.components),o.createElement(s.Provider,{value:e},t.children)}}}]);