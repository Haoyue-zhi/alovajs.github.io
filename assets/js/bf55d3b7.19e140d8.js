"use strict";(self.webpackChunkalova_website=self.webpackChunkalova_website||[]).push([[2116],{49829:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>r,metadata:()=>s,toc:()=>h});var a=t(85893),i=t(11151);const r={title:"Cache operation"},c=void 0,s={id:"api/cache",title:"Cache operation",description:"invalidateCache()",source:"@site/docs/api/04-cache.md",sourceDirName:"api",slug:"/api/cache",permalink:"/next/api/cache",draft:!1,unlisted:!1,editUrl:"https://github.com/alovajs/alovajs.github.io/blob/main/docs/api/04-cache.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Cache operation"},sidebar:"api",previous:{title:"Core useHooks",permalink:"/next/api/core-hooks"},next:{title:"Response states operation",permalink:"/next/api/states"}},l={},h=[{value:"invalidateCache()",id:"invalidatecache",level:2},{value:"setCache()",id:"setcache",level:2},{value:"queryCache()",id:"querycache",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"invalidatecache",children:"invalidateCache()"}),"\n",(0,a.jsx)(n.p,{children:"Active cache invalidation."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Go to ",(0,a.jsx)(n.a,{href:"/next/tutorial/cache/manually-invalidate",children:"Manually invalidate cache"})," for details."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"type"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"type MethodFilter =\n  | string\n  | RegExp\n  | {\n      name?: string | RegExp;\n      filter?: MethodFilterHandler;\n      alova?: Alova;\n    };\nfunction invalidateCache(matcher?: Method | Method[] | MethodFilter): void;\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Parameters"})}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"matcher"}),": Cache invalid matcher, the value is a method instance or array, or it can be set to ",(0,a.jsx)(n.a,{href:"/next/tutorial/client/in-depth/method-matcher",children:"method instance matcher"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"return"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"none"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Example"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { invalidateCache } from 'alova';\n\ninvalidateCache(method);\ninvalidateCache([method1, method2]);\ninvalidateCache({\n  name: 'userMethod',\n  filter: method => method.name === 'method1'\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"setcache",children:"setCache()"}),"\n",(0,a.jsx)(n.p,{children:"Set up response caching."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Go to ",(0,a.jsx)(n.a,{href:"/next/tutorial/cache/set-and-query",children:"Cache Update and Query"})," for details."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"type"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"type MethodFilter =\n  | string\n  | RegExp\n  | {\n      name?: string | RegExp;\n      filter?: MethodFilterHandler;\n      alova?: Alova;\n    };\nfunction setCache(\n  matcher: Method | Method[] | MethodFilter,\n  dataOrUpdater: R | ((oldCache: R) => R | undefined | void)\n): void;\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Parameters"})}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"matcher"}),": The value is method instance, method name string, method name regular expression. It can also be set to ",(0,a.jsx)(n.a,{href:"/next/tutorial/client/in-depth/method-matcher",children:"method instance matcher"}),", which will match all matching The method instance of the condition sets the cached data."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dataOrUpdater"}),": Cache data or update function. If it is a function, it needs to return new cached data. If it returns ",(0,a.jsx)(n.code,{children:"undefined"})," or does not return, the update will be cancelled."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"return"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"none"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Example"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { setCache } from 'alova';\n\nsetCache(method, {});\nsetCache([method1, method2], {});\nsetCache(\n  {\n    name: 'userMethod',\n    filter: method => method.name === 'method1'\n  },\n  {}\n);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"querycache",children:"queryCache()"}),"\n",(0,a.jsx)(n.p,{children:"Query cache."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Go to ",(0,a.jsx)(n.a,{href:"/next/tutorial/cache/set-and-query",children:"Cache Update and Query"})," for details."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"type"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"type MethodFilter =\n  | string\n  | RegExp\n  | {\n      name?: string | RegExp;\n      filter?: MethodFilterHandler;\n      alova?: Alova;\n    };\nfunction queryCache(matcher?: Method | MethodFilter): R | undefined;\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Parameters"})}),"\n"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"matcher"}),": The value is method instance, method name string, method name regular expression. It can also be set to ",(0,a.jsx)(n.a,{href:"/next/tutorial/client/in-depth/method-matcher",children:"method instance matcher"}),", which will meet the conditions. The first method instance queries cached data."]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"return"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Cache data, or return ",(0,a.jsx)(n.code,{children:"undefined"})," if not cached."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Example"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { queryCache } from 'alova';\n\nconst responseCache = queryCache(method);\nconst responseCache = queryCache({\n  name: 'userMethod',\n  filter: method => method.name === 'method1'\n});\n"})})]})}function o(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>c});var a=t(67294);const i={},r=a.createContext(i);function c(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);